<!DOCTYPE html>
<html lang="en" class="dark">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="styles.css">
        <title>Majd Barakat Portfolio</title>
        <script src="js/jquery.js"></script>
        <script src="js/app.js"></script>
    </head>
    <body>
    <div class="menu-box" id="mb1"></div>
    <div class="menu-box" id="mb2"></div>
    <div class="menu-box" id="mb3"></div>
        <ul class="nav-menu">
            <li id="Home"><a href="">Home</a></li>
            <li id="Projects"><a href="">Projects</a></li>
            <li id="About"><a href="">About</a></li>
            <li id="ContactMe"><a href="">Contact Me</a></li>
        </ul>
        <header id="navbar">
            <div class="navbar-container">
                <div class="nav-left">
                    <a href="" class="logo">mb</a>
                    <div class="light-dark-modes">
                        <div class="" id="light-btn"></div>
                        <div class="active" id="dark-btn"></div>
                    </div>
                </div>
                <div class="nav-right">
                    <a class="burger" id="OFF">
                        <div class="line1"></div>
                        <div class="line2"></div>
                        <div class="line3"></div>
                    </a>
                </div>
            </div>
        </header>
        
        <footer>
            <div class="footer-container">
                <div class="scroll-container">
                    <div class="scroll"></div>
                    <p>Scroll to <br> next page</p>
                </div>
            </div>
        </footer>

        <div class="page-selector">
            <a href="#page-01" class="" id='p1'></a>
            <a href="#page-02" class="" id='p2'></a>
            <a href="#page-03" class="" id='p3'></a>
            <a href="#page-04" class="" id='p4'></a>
        </div>
        
        <!--- Landing Page #01 -->
        
    <div class="container">
        
        <section id="page-01" class="page">
            <div class="title-container">
                <h1 class="from-left">MAJD <br> BARAKAT</h1>
                <div class="overflow-container">
                    <h2 class="from-top">UI UX Web Developer</h2>
                </div>
                <div class="overflow-container">
                    <div class="btn-container from-top-delayed">
                        <a href="#page-02" class="btn1">My Projects</a>
                        <a href="" class="btn2">Contact Me</a>
                    </div>
                </div>
            </div>
            <div class="sphere-container">
                <div class="sphere"></div>
            </div>
        </section>
        
        <!---  Page #02 -->
        
        <section id="page-02" class="page">
            <div  class="title-container">
                <h1 class="from-left">Project <br> Name </h1>
                <div class="overflow-container">
                    <h2 class="from-top" >Project Description</h2>
                </div>
                <div class="overflow-container">
                    <div class="btn-container from-top-delayed">
                        <a href="" class="btn2">View Project</a>
                    </div>
                </div>
            </div>
            <div class="project-container">
                <div class="p-c">
                    <div class="overflow-container">
                        <h3 class="from-bottom">01</h3>
                    </div>
                    <div class="project-bgd">
                        <div class="project-load from-right"></div>
                        <div class="project-img from-right-delayed" id="1"></div>
                    </div>
                </div>
            </div>
        </section>
        
        <!---  Page #03 -->
        
        <section id="page-03" class="page">
            <div class="title-container">
                <h1 class="from-left" >Project <br> Name </h1>
                <div class="overflow-container">
                    <h2 class="from-top">Project Description</h2>
                </div>
                <div class="overflow-container">
                    <div class="btn-container from-top-delayed">
                        <a href="" class="btn2">View Project</a>
                    </div>
                </div>
            </div>
            <div class="project-container">
                <div class="p-c">
                    <div class="overflow-container">
                        <h3 class="from-bottom">02</h3>
                    </div>
                    <div class="project-bgd">
                        <div class="project-load from-right"></div>
                        <div class="project-img from-right-delayed" id="2"></div>
                    </div>
                </div>
            </div>  
        </section>
        
        <!---  Page #04 -->
        
        <section id="page-04" class="page">
            <div class="title-container">
                <h1 class="from-left" >Project <br> Name </h1>
                <div class="overflow-container">
                    <h2 class="from-top">Project Description</h2>
                </div>
                <div class="overflow-container">
                    <div class="btn-container from-top-delayed">
                        <a href="" class="btn2">View Project</a>
                    </div>
                </div>
            </div>
            <div class="project-container">
                <div class="p-c">
                    <div class="overflow-container">
                        <h3 class="from-bottom">03</h3>
                    </div>
                    <div class="project-bgd">
                        <div class="project-load from-right"></div>
                        <div class="project-img from-right-delayed" id="3"></div>
                    </div>
                </div>
            </div>            
        </section>
    </div>

<script>
    
    $(document).ready(function(){
        
        var burger = $(".burger");
        var line1 = $(".line1");
        var line2 = $(".line2");
        var line3 = $(".line3");
        var mb1 = $("#mb1");
        var mb2 = $("#mb2");
        var mb3 = $("#mb3");
        var navMenu = $(".nav-menu");
        var menuBtns = $(".nav-menu li a");
        var scrollLink = $(".page-selector a");
        var pageHeight = $(window).height();
        var lastScrollTop = 0;
        var isScrolling = false;
        
        
        changeActivePage();
        // setInterval(animationsOut,300);
        
        $(".container").scroll(function(){
            changeActivePage();
            $(".scroll-container").transition({x:"-200px",opacity:0})
            // fadeOut("#p1",".title-container")
            // animationsOut();
            // animationsIn();
        });
        
        // fadeOut("#p1", ".scroll-container")
        // setInterval(fadeOut("#p1", ".scroll-container"));

        // function fadeOut(pageSelector, elementSelector ){
        //     console.log($(pageSelector).attr("class"))
        //     if($(pageSelector).attr("class") == "active"){
        //         $(elementSelector).transition({x:"0vw",delay:0})
        //     }else{
        //         $(elementSelector).transition({x:"100vw",delay:0})
        //     }
        // };

        // function animationsOut(){
        //     if(getPageNumber() != 1){
        //         $("section#page-01 .title-container h1").css({x : "-50vw"});
        //         $("section#page-01 .title-container h2").css({y : "-50vh"});
        //         $("section#page-01 .btn-container").css({y : "-50vh"});
        //         $(".scroll-container").transition({opacity:0},300);
        //     }else if(getPageNumber() == 1){
        //         $("section#page-01 .title-container h1").transition({x : "0"},600);
        //         $("section#page-01 .title-container h2").transition({y : "0", delay: 200},500);
        //         $("section#page-01 .btn-container").transition({y : "0", delay: 200},500);

            // }else if($("#p3").attr("class") == ""){
            // }else if($("#p4").attr("class") == ""){
        //     }
        // }

        // function animationsIn(){
        //     if($("#p1").attr("class") == "active"){
        //         $("section#page-01 .title-container h1").transition({x:"0"});
        //     }else if($("#p2").attr("class") == "active"){
        //         console.log("page2")
        //     }else if($("#p3").attr("class") == "active"){
        //         console.log("page3")
        //     }else if($("#p4").attr("class") == "active"){
        //         console.log("page4")
        //     }
        // }
    
        
        function getPageNumber(){
            var scrollbarLocation = $(".container").scrollTop();
            return Math.round(scrollbarLocation/pageHeight) + 1;
        };
        
        function slideIn(v1,v2,v3){
            v1.transition({x:'0vw'});
            v2.transition({x:'0vw',delay: 200});
            v3.transition({x:'0vw',delay: 400});
        };
        
        function slideOut(v1,v2,v3){
            v1.transition({x:'100vw',delay: 600});
            v2.transition({x:'100vw',delay: 400});
            v3.transition({x:'100vw',delay: 200});
        };
        
        burger.click(function(){
            if(burger.attr("id") == "OFF"){
                burger.attr("id","ON");
                line1.transition({rotate:'45', y:"21px"});
                line2.transition({x:"-50px",opacity:0});
                line3.transition({rotate:'-45deg' , y:"-21px"});
                slideIn(mb1,mb2,mb3);
                navMenu.transition({x:'0vw',delay: 600});
                menuBtns.transition({y:"0px",delay:700});
            }
            else{
                burger.attr("id","OFF")
                line1.transition({rotate:'-0', y:"0"})
                line2.transition({x:"0",opacity:1})
                line3.transition({rotate:'0' , y:"0"})
                slideOut(mb1,mb2,mb3);
                navMenu.transition({x:'100vw'});
            }
        });
        
        // scrollLink.click(function(e){
        //     e.preventDefault();
        //     $('.container').animate({
        //         scrollTop: $(this.hash).offset().top 
        //     },700);
        // });

        $(".light-dark-modes").click(function(){
            console.log("clicked")
            if($("#dark-btn").hasClass("active") == true){
                $("html").removeClass("dark")
                $("html").addClass("light")
                $("#light-btn").addClass("active");
                $("#dark-btn").removeClass("active")
            }else{
                $("html").removeClass("light")
                $("html").addClass("dark")
                $("#dark-btn").addClass("active");
                $("#light-btn").removeClass("active")
            }
        });
        
        function changeActivePage(){
            $("#p" + getPageNumber()).addClass('active');
            $("#p" + getPageNumber()).siblings().removeClass('active');
        };
        
        /* JS animations n IntersectionObserver*/

        // const sections = document.querySelectorAll("section")
        const titles = document.querySelectorAll("h1")
        const subTitles = document.querySelectorAll("h2")
        const numbers = document.querySelectorAll("h3")
        const buttons = document.querySelectorAll(".btn-container")
        const loads = document.querySelectorAll(".project-load")
        const images = document.querySelectorAll(".project-img")

        const options = {
            root:null,
            threshold:0,
        };

        const appearOnScroll = new IntersectionObserver(function(entries, appearOnScroll){
        entries.forEach(entry => {
            if(!entry.isIntersecting){
                entry.target.classList.remove("appear")
            }else{
                entry.target.classList.add("appear")
            }
                });
        }, options);

        titles.forEach(title =>{
            appearOnScroll.observe(title);
        })

        subTitles.forEach(subTitle =>{
            appearOnScroll.observe(subTitle);
        })

        buttons.forEach(button =>{
            appearOnScroll.observe(button);
        })

        numbers.forEach(number => {
            appearOnScroll.observe(number)
        })
        
        loads.forEach(load => {
            appearOnScroll.observe(load)
        })

        images.forEach(image =>{
            appearOnScroll.observe(image)
        })

    });
    
            // $(window).scroll(function() {
            //     // console.log(getScrollBarLocation())
            //     // console.log($('section#page-01 h1').offset());
            //     // console.log(getScrollDirection())
            // });
            // scrollToPage( getScrollDirection() , getPageNumber() , 4)
            
            // $(window).on("mousewheel DOMMouseScroll", function(event) {
            //     // console.log(getScrollDirection());
            // });
    
            
            // function getScrollDirection(event){
            //     var st = $(this).scrollTop();
            //     var direction = null;
            //     if (st > lastScrollTop && isScrolling == false){
            //         direction = "down"
            //     } else if (st < lastScrollTop && isScrolling == false) {
            //         direction = "up"
            //     lastScrollTop = st;
            //     return direction;
            //     }
    
            // window.onscroll = () => {
            //     const direction = this.oldScroll > this.scrollY ? 'up': 'down'
            //     console.log(direction)
            //     this.oldScroll = this.scrollY;
            // }
    
            // function scrollToPage(ScrollDirection,pageNumber,maxPages){
            //     if(ScrollDirection == "down" && pageNumber < maxPages){
            //         $("#p" + (getPageNumber() + 1)).trigger('click'); 
            //         console.log(ScrollDirection);
            //         isScrolling = true;
            //     }
            //     else if(ScrollDirection == "up" && pageNumber > 1){
            //         $("#p" + (getPageNumber() - 1)).trigger('click');
            //         console.log(ScrollDirection)
            //         isScrolling = true;
            //     }
            //     setTimeout(function(){isScrolling = false}, 750);
            // }

    // console.log(scrollbarLocation + "---" + pageHeight)
    
    // scrollLink.each(function(){

    // var sectionOffset = $(this.hash).offset().top

    // if(sectionOffset <= scrollbarLocation){
    //     $(this).addClass('active');
    //     $(this).siblings().removeClass('active');
    // } 
    // })


</script>


</body>
</html>